---
import BaseLayout from "@layouts/BaseLayout.astro";
import CTA from "@components/CTA.astro";

const tokens = {
  site: {
    name: "{{site.name}}",
  },
  organization: {
    name: "{{organization.name}}",
    address: {
      lineOne: "{{organization.address.lineOne}}",
      city: "{{organization.address.city}}",
      state: "{{organization.address.state}}",
    },
  },
};

const addressString = `${tokens.organization.address.lineOne}, ${tokens.organization.address.city}, ${tokens.organization.address.state}`;

// Sample events data - in a real implementation, this would come from a CMS or database
const upcomingEvents = [
  {
    id: "adoption-day-march",
    title: "Super Adoption Saturday",
    date: "2024-03-15",
    time: "10:00 AM - 4:00 PM",
    location: `${tokens.organization.name} Facility`,
    address: addressString,
    description: "Join us for our biggest adoption event of the month! Meet dozens of amazing animals looking for their forever homes. Adoption fees reduced by 50%.",
    image: "/assets/images/events/adoption-day.jpg",
    type: "adoption",
    featured: true
  },
  {
    id: "fundraiser-gala",
    title: "Paws & Hearts Annual Gala",
    date: "2024-04-20",
    time: "6:00 PM - 10:00 PM",
    location: "Denver Convention Center",
    address: "700 14th St, Denver, CO 80202",
    description: "Our annual fundraising gala featuring dinner, silent auction, and inspiring stories of rescue and recovery. Formal attire requested.",
    image: "/assets/images/events/gala.jpg",
    type: "fundraiser",
    featured: true
  },
  {
    id: "volunteer-orientation",
    title: "New Volunteer Orientation",
    date: "2024-03-22",
    time: "2:00 PM - 4:00 PM",
    location: `${tokens.organization.name} Training Room`,
    address: addressString,
    description: "Learn about volunteer opportunities and get started helping animals in need. Training provided for all volunteer positions.",
    image: "/assets/images/events/volunteer-orientation.jpg",
    type: "volunteer",
    featured: false
  },
  {
    id: "pet-photos",
    title: "Professional Pet Photos with Santa",
    date: "2024-12-14",
    time: "11:00 AM - 3:00 PM",
    location: `${tokens.organization.name} Facility`,
    address: addressString,
    description: "Bring your pets for professional holiday photos with Santa! $20 donation includes digital photos. All proceeds benefit our animals.",
    image: "/assets/images/events/pet-photos.jpg",
    type: "fundraiser",
    featured: false
  }
];

const pastEvents = [
  {
    id: "valentine-adoption",
    title: "Valentine's Day Adoption Special",
    date: "2024-02-14",
    description: "Our Valentine's adoption event found homes for 25 animals!",
    image: "/assets/images/events/valentine-past.jpg",
    results: "25 animals adopted"
  },
  {
    id: "winter-fundraiser",
    title: "Winter Warmth Fundraiser",
    date: "2024-01-15",
    description: "Community came together to raise funds for heating and winter supplies.",
    image: "/assets/images/events/winter-past.jpg",
    results: "$15,000 raised"
  }
];
---

<BaseLayout
  title={`${tokens.site.name} - Events`}
  description={`Join ${tokens.organization.name} for upcoming adoption events, fundraisers, and volunteer opportunities. Help us save more animal lives.`}
>
  <!-- ============================================ -->
  <!--                 Page Header                  -->
  <!-- ============================================ -->
  
  <section id="page-header">
    <div class="cs-container">
      <h1 class="cs-title">Upcoming Events</h1>
      <p class="cs-text">
        Join us for adoption events, fundraisers, and volunteer opportunities. 
        Every event helps us save more animal lives and build our community of animal lovers.
      </p>
    </div>
  </section>

  <!-- ============================================ -->
  <!--              Featured Events                 -->
  <!-- ============================================ -->
  
  <section id="featured-events">
    <div class="cs-container">
      <h2 class="cs-section-title">Don't Miss These Events</h2>
      
      <div class="cs-featured-grid">
        {upcomingEvents.filter(event => event.featured).map((event) => (
          <div class="cs-featured-event">
            <div class="cs-event-image">
              <img
                src={event.image}
                alt={event.title}
                width="600"
                height="400"
                loading="lazy"
              />
              <div class="cs-event-type cs-type-{event.type}">
                {event.type.charAt(0).toUpperCase() + event.type.slice(1)}
              </div>
            </div>
            
            <div class="cs-event-content">
              <h3 class="cs-event-title">{event.title}</h3>
              
              <div class="cs-event-details">
                <div class="cs-detail">
                  <strong>Date:</strong> {new Date(event.date).toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                  })}
                </div>
                <div class="cs-detail">
                  <strong>Time:</strong> {event.time}
                </div>
                <div class="cs-detail">
                  <strong>Location:</strong> {event.location}
                </div>
                <div class="cs-detail">
                  <strong>Address:</strong> {event.address}
                </div>
              </div>
              
              <p class="cs-event-description">{event.description}</p>
              
              <div class="cs-event-actions">
                <a href={`/events/${event.id}`} class="cs-button-solid">Learn More</a>
                <a href="/contact" class="cs-button-transparent">RSVP</a>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!--              All Events                      -->
  <!-- ============================================ -->
  
  <section id="all-events">
    <div class="cs-container">
      <h2 class="cs-section-title">All Upcoming Events</h2>
      
      <div class="cs-event-filters">
        <button class="cs-filter-btn active" data-filter="all">All Events</button>
        <button class="cs-filter-btn" data-filter="adoption">Adoption Events</button>
        <button class="cs-filter-btn" data-filter="fundraiser">Fundraisers</button>
        <button class="cs-filter-btn" data-filter="volunteer">Volunteer</button>
      </div>
      
      <div class="cs-events-grid">
        {upcomingEvents.map((event) => (
          <div class="cs-event-card" data-type={event.type}>
            <div class="cs-card-image">
              <img
                src={event.image}
                alt={event.title}
                width="400"
                height="250"
                loading="lazy"
              />
              <div class="cs-event-date">
                <div class="cs-month">{new Date(event.date).toLocaleDateString('en-US', { month: 'short' })}</div>
                <div class="cs-day">{new Date(event.date).getDate()}</div>
              </div>
            </div>
            
            <div class="cs-card-content">
              <div class="cs-event-type cs-type-{event.type}">
                {event.type.charAt(0).toUpperCase() + event.type.slice(1)}
              </div>
              
              <h3 class="cs-card-title">{event.title}</h3>
              
              <div class="cs-card-details">
                <div class="cs-time">{event.time}</div>
                <div class="cs-location">{event.location}</div>
              </div>
              
              <p class="cs-card-description">{event.description}</p>
              
              <div class="cs-card-actions">
                <a href={`/events/${event.id}`} class="cs-learn-more">Learn More â†’</a>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!--              Past Events                     -->
  <!-- ============================================ -->
  
  <section id="past-events">
    <div class="cs-container">
      <h2 class="cs-section-title">Recent Event Highlights</h2>
      
      <div class="cs-past-grid">
        {pastEvents.map((event) => (
          <div class="cs-past-event">
            <div class="cs-past-image">
              <img
                src={event.image}
                alt={event.title}
                width="400"
                height="300"
                loading="lazy"
              />
            </div>
            
            <div class="cs-past-content">
              <h3>{event.title}</h3>
              <div class="cs-past-date">{new Date(event.date).toLocaleDateString()}</div>
              <p>{event.description}</p>
              <div class="cs-results">{event.results}</div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!--              Event Newsletter               -->
  <!-- ============================================ -->
  
  <section id="event-newsletter">
    <div class="cs-container">
      <div class="cs-newsletter-content">
        <h2>Stay Updated on Events</h2>
        <p>
          Subscribe to our newsletter to be the first to know about upcoming adoption events, 
          fundraisers, and volunteer opportunities.
        </p>
        
        <form class="cs-newsletter-form">
          <input 
            type="email" 
            placeholder="Enter your email address" 
            required 
            class="cs-email-input"
          />
          <button type="submit" class="cs-subscribe-btn">Subscribe</button>
        </form>
        
        <div class="cs-newsletter-benefits">
          <div class="cs-benefit">
            <strong>Early Access:</strong> Get notified about events before they're posted publicly
          </div>
          <div class="cs-benefit">
            <strong>Special Invites:</strong> Receive invitations to exclusive donor and volunteer events
          </div>
          <div class="cs-benefit">
            <strong>Event Reminders:</strong> Never miss an important adoption event or fundraiser
          </div>
        </div>
      </div>
    </div>
  </section>

  <CTA />
</BaseLayout>

<style lang="less">
  /* Page Header */
  #page-header {
    padding: var(--sectionPadding);
    background: linear-gradient(135deg, var(--primary) 0%, var(--primaryDark) 100%);
    color: white;
    text-align: center;

    .cs-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .cs-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      margin-bottom: 1rem;
      color: white;
    }

    .cs-text {
      font-size: 1.125rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
    }
  }

  /* Section Titles */
  .cs-section-title {
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 3rem;
    color: var(--headerColor);
  }

  /* Featured Events */
  #featured-events {
    padding: var(--sectionPadding);

    .cs-featured-grid {
      display: grid;
      gap: 3rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .cs-featured-event {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;

      &:nth-child(even) {
        .cs-event-image {
          order: 2;
        }
      }

      .cs-event-image {
        position: relative;

        img {
          width: 100%;
          height: 400px;
          object-fit: cover;
        }

        .cs-event-type {
          position: absolute;
          top: 1rem;
          left: 1rem;
          padding: 0.5rem 1rem;
          border-radius: 20px;
          font-weight: 600;
          font-size: 0.875rem;

          &.cs-type-adoption {
            background: #27ae60;
            color: white;
          }

          &.cs-type-fundraiser {
            background: #e74c3c;
            color: white;
          }

          &.cs-type-volunteer {
            background: #3498db;
            color: white;
          }
        }
      }

      .cs-event-content {
        padding: 2rem;

        .cs-event-title {
          font-size: 2rem;
          font-weight: 700;
          margin-bottom: 1.5rem;
          color: var(--headerColor);
        }

        .cs-event-details {
          margin-bottom: 1.5rem;

          .cs-detail {
            margin-bottom: 0.5rem;

            strong {
              color: var(--primary);
              margin-right: 0.5rem;
            }
          }
        }

        .cs-event-description {
          font-size: 1.125rem;
          line-height: 1.6;
          margin-bottom: 2rem;
          color: var(--bodyTextColor);
        }

        .cs-event-actions {
          display: flex;
          gap: 1rem;
          flex-wrap: wrap;
        }
      }
    }
  }

  /* All Events */
  #all-events {
    padding: var(--sectionPadding);
    background: #f8f9fa;

    .cs-event-filters {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 3rem;
      flex-wrap: wrap;
    }

    .cs-filter-btn {
      padding: 0.75rem 1.5rem;
      border: 2px solid var(--primary);
      background: white;
      color: var(--primary);
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;

      &:hover,
      &.active {
        background: var(--primary);
        color: white;
      }
    }

    .cs-events-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .cs-event-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;

      &:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }

      .cs-card-image {
        position: relative;

        img {
          width: 100%;
          height: 250px;
          object-fit: cover;
        }

        .cs-event-date {
          position: absolute;
          top: 1rem;
          right: 1rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          text-align: center;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);

          .cs-month {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
          }

          .cs-day {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--headerColor);
          }
        }
      }

      .cs-card-content {
        padding: 1.5rem;

        .cs-event-type {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-size: 0.75rem;
          font-weight: 600;
          margin-bottom: 1rem;

          &.cs-type-adoption {
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
          }

          &.cs-type-fundraiser {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
          }

          &.cs-type-volunteer {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
          }
        }

        .cs-card-title {
          font-size: 1.25rem;
          font-weight: 700;
          margin-bottom: 1rem;
          color: var(--headerColor);
        }

        .cs-card-details {
          margin-bottom: 1rem;

          .cs-time,
          .cs-location {
            font-size: 0.875rem;
            color: var(--bodyTextColor);
            margin-bottom: 0.25rem;
          }
        }

        .cs-card-description {
          font-size: 0.875rem;
          line-height: 1.5;
          margin-bottom: 1.5rem;
          color: var(--bodyTextColor);
        }

        .cs-card-actions {
          .cs-learn-more {
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            transition: color 0.3s ease;

            &:hover {
              color: var(--primaryDark);
            }
          }
        }
      }
    }
  }

  /* Past Events */
  #past-events {
    padding: var(--sectionPadding);

    .cs-past-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 2rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    .cs-past-event {
      display: grid;
      grid-template-columns: 150px 1fr;
      gap: 1.5rem;
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);

      .cs-past-image {
        img {
          width: 100%;
          height: 100px;
          object-fit: cover;
          border-radius: 8px;
        }
      }

      .cs-past-content {
        h3 {
          font-size: 1.125rem;
          font-weight: 700;
          margin-bottom: 0.5rem;
          color: var(--headerColor);
        }

        .cs-past-date {
          font-size: 0.875rem;
          color: var(--primary);
          font-weight: 600;
          margin-bottom: 0.75rem;
        }

        p {
          font-size: 0.875rem;
          line-height: 1.5;
          margin-bottom: 0.75rem;
          color: var(--bodyTextColor);
        }

        .cs-results {
          background: var(--accent);
          padding: 0.5rem 1rem;
          border-radius: 20px;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--primary);
          display: inline-block;
        }
      }
    }
  }

  /* Event Newsletter */
  #event-newsletter {
    padding: var(--sectionPadding);
    background: linear-gradient(135deg, var(--primary) 0%, var(--primaryDark) 100%);
    color: white;

    .cs-newsletter-content {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;

      h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: white;
      }

      p {
        font-size: 1.125rem;
        line-height: 1.6;
        margin-bottom: 2rem;
        color: rgba(255, 255, 255, 0.9);
      }

      .cs-newsletter-form {
        display: flex;
        gap: 1rem;
        margin-bottom: 3rem;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;

        .cs-email-input {
          flex: 1;
          padding: 1rem;
          border: none;
          border-radius: 8px;
          font-size: 1rem;

          &:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
          }
        }

        .cs-subscribe-btn {
          padding: 1rem 2rem;
          background: white;
          color: var(--primary);
          border: none;
          border-radius: 8px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;

          &:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
          }
        }
      }

      .cs-newsletter-benefits {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        text-align: left;

        .cs-benefit {
          strong {
            display: block;
            margin-bottom: 0.25rem;
            color: white;
          }

          color: rgba(255, 255, 255, 0.8);
          font-size: 0.875rem;
        }
      }
    }
  }

  /* Buttons */
  .cs-button-solid,
  .cs-button-transparent {
    padding: 1rem 2rem;
    border-radius: 6px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    display: inline-block;
    text-align: center;
  }

  .cs-button-solid {
    background: var(--primary);
    color: white;
    border: 2px solid var(--primary);

    &:hover {
      background: var(--primaryDark);
      border-color: var(--primaryDark);
    }
  }

  .cs-button-transparent {
    background: transparent;
    color: var(--primary);
    border: 2px solid var(--primary);

    &:hover {
      background: var(--primary);
      color: white;
    }
  }

  /* Mobile Responsive */
  @media only screen and (max-width: 768px) {
    .cs-featured-event {
      grid-template-columns: 1fr !important;

      .cs-event-image {
        order: 1 !important;
      }

      .cs-event-content {
        padding: 1.5rem;
      }
    }

    .cs-events-grid {
      grid-template-columns: 1fr;
    }

    .cs-past-grid {
      grid-template-columns: 1fr;
    }

    .cs-past-event {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .cs-newsletter-form {
      flex-direction: column;
    }

    .cs-newsletter-benefits {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .cs-event-actions {
      flex-direction: column;
    }
  }
</style>

<script>
  // Event filtering functionality
  document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.cs-filter-btn');
    const eventCards = document.querySelectorAll('.cs-event-card');

    filterButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Remove active class from all buttons
        filterButtons.forEach(btn => btn.classList.remove('active'));
        // Add active class to clicked button
        this.classList.add('active');

        const filter = this.getAttribute('data-filter');

        eventCards.forEach(card => {
          const htmlCard = card as HTMLElement;
          if (filter === 'all') {
            htmlCard.style.display = 'block';
          } else {
            const cardType = htmlCard.getAttribute('data-type');
            if (cardType === filter) {
              htmlCard.style.display = 'block';
            } else {
              htmlCard.style.display = 'none';
            }
          }
        });
      });
    });

    // Newsletter form submission
    const newsletterForm = document.querySelector('.cs-newsletter-form');
    if (newsletterForm) {
      newsletterForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const emailInput = this.querySelector('.cs-email-input') as HTMLInputElement;
        if (emailInput && emailInput.value) {
          alert('Thank you for subscribing! You\'ll receive event updates soon.');
          emailInput.value = '';
        }
      });
    }
  });
</script>
