---
import BaseLayout from "@layouts/BaseLayout.astro";
import CTA from "@components/CTA.astro";

// Optimize our landing image and pass it as props to the BaseLayout (for preloading) and Landing (for rendering)
import landingImage from "@assets/images/landing.jpg" // <-- THE PATH TO THE ASSET YOU WANT TO PRELOAD - The asset must live in src
import { getImage } from "astro:assets";
const optimizedImage = await getImage({src: landingImage, format: 'avif'})

// Fetch dynamic content for homepage
import { fetchAllPageData } from "../utils/content-fetcher.js";

const origin = Astro.url?.origin ?? import.meta.env.PUBLIC_SITE_URL ?? '';
const { content: fetchedContent, organization } = await fetchAllPageData('homepage', '9', origin);
const websiteContent = fetchedContent || {};

// Fallback content if API fails
const defaultContent = {
  hero: {
    headline: "Every Dog Deserves a Loving Home",
    subheadline: "Rescue • Love • Adopt",
    body_text: "At Mission Bay Puppy Rescue, we're dedicated to finding loving homes for dogs in need.",
    button_text: "Meet Our Dogs",
    button_link: "/our-animals/"
  }
};

const defaultFaqSection = {
  headline: "Frequently Asked Questions",
  subheadline: "Common Questions",
  body_text: "Find answers to the most common questions about our adoption process.",
  faq_question_1: "How long does the adoption process take?",
  faq_answer_1: "Our adoption process typically takes 3-7 days from application to bringing your new companion home.",
  faq_question_2: "What is included in the adoption fee?",
  faq_answer_2: "All dogs come spayed/neutered, vaccinated, microchipped, and with a health certificate.",
  faq_question_3: "Can I meet the dog before adopting?",
  faq_answer_3: "Absolutely! We encourage meet-and-greets to ensure a perfect match for both you and the dog.",
  faq_question_4: "Do you have a return policy?",
  faq_answer_4: "Yes, if for any reason the adoption doesn't work out, we welcome the dog back with open arms.",
  faq_question_5: "What if I have other pets?",
  faq_answer_5: "We can arrange supervised introductions to ensure all pets get along before finalizing the adoption."
};

// Use dynamic content with fallbacks
const footerSource = websiteContent.footer?.content || websiteContent.footer || {};
const defaultFooterContent = {
  organization_name: "Mission Bay Puppy Rescue",
  address_line_one: "123 Main Street",
  address_line_two: "Suite 200",
  address_city: "San Diego",
  address_state: "CA",
  address_zip: "92109",
  phone: "555-555-5555",
  phone_tel: "5555555555",
  email: "info@mbpr.org",
  ein: "87-2984609",
  copyright: `© ${new Date().getFullYear()} Mission Bay Puppy Rescue. All rights reserved.`,
  socialMedia: {
    instagram: "",
    facebook: "",
    twitter: ""
  }
};

const content = {
  hero: websiteContent.hero || defaultContent.hero,
  services_header: websiteContent.services_header || {
    headline: "How We Help",
    subheadline: "Our Services",
    body_text: "We provide comprehensive care and support for dogs in need throughout the San Diego area.",
    service_1: "Dog Rescue & Rehabilitation",
    service_1_description: "We rescue dogs from shelters and provide medical care, training, and love.",
    service_2: "Foster Care Program",
    service_2_description: "Our network of foster families provides temporary homes while dogs await adoption.",
    service_3: "Adoption Matching",
    service_3_description: "We carefully match dogs with families to ensure lifelong happiness."
  },
  about_us: websiteContent.about_us || {
    headline: "About Company Title",
    subheadline: "About Us",
    body_text: "Founded in 2020, Mission Bay Puppy Rescue has been dedicated to saving and rehoming dogs throughout San Diego.",
    button_text: "More About Us",
    button_link: "/about/"
  },
  what_we_do: websiteContent.what_we_do || {
    headline: "Talk about a main service keyword",
    subheadline: "What We Do",
    body_text: "Professional dog rescue services with expert care and loving foster homes.",
    featured_image_url: "/assets/images/construction.jpg",
    secondary_image_url: "/assets/images/cabinets2.jpg"
  },
  success_stories: websiteContent.success_stories || {
    headline: "Success Stories & Happy Tails",
    subheadline: "Our Success Stories",
    body_text: "See the amazing transformations and happy endings we've helped create.",
    button_text: "View All Success Stories",
    button_link: "/success-stories"
  },
  faq_section: {
    ...defaultFaqSection,
    ...(websiteContent.faq_section || {})
  },
  reviews_header: websiteContent.reviews_header || {
    headline: "Words From Our Customers",
    subheadline: "Our Reviews",
    body_text: "Hear from families who have found their perfect companion through Mission Bay Puppy Rescue.",
    button_text: "Our Reviews",
    button_link: "/reviews"
  },
  cta: websiteContent.cta || {},

  footer: {
    organization_name: footerSource.footer_organization_name || footerSource.organization_name || defaultFooterContent.organization_name,
    address_line_one: footerSource.footer_address_line_one || footerSource.address_line_one || defaultFooterContent.address_line_one,
    address_line_two: footerSource.footer_address_line_two || footerSource.address_line_two || defaultFooterContent.address_line_two,
    address_city: footerSource.footer_address_city || footerSource.address_city || defaultFooterContent.address_city,
    address_state: footerSource.footer_address_state || footerSource.address_state || defaultFooterContent.address_state,
    address_zip: footerSource.footer_address_zip || footerSource.address_zip || defaultFooterContent.address_zip,
    phone: footerSource.footer_phone || footerSource.phone || defaultFooterContent.phone,
    phone_tel: (footerSource.footer_phone || footerSource.phone || defaultFooterContent.phone).replace(/[^\d]/g, '') || defaultFooterContent.phone_tel,
    email: footerSource.footer_email || footerSource.email || defaultFooterContent.email,
    ein: footerSource.footer_ein || footerSource.ein || defaultFooterContent.ein,
    copyright: footerSource.footer_copyright || footerSource.copyright || defaultFooterContent.copyright,
    socialMedia: footerSource.socialMedia || defaultFooterContent.socialMedia
  }
}

const showSuccessStories = false;
---

<BaseLayout
  title={organization?.org ? `${organization.org} - Every Dog Deserves a Loving Home` : "Mission Bay Puppy Rescue - Every Dog Deserves a Loving Home"}
  description="Mission Bay Puppy Rescue is dedicated to finding loving homes for dogs in need. Browse our available animals and learn how you can help make a difference."
  preloadedImage = {optimizedImage}
  organization = {organization}
>
  <!-- ============================================ -->
  <!--                    Hero                      -->
  <!-- ============================================ -->

  <section id="hero">
    <div class="cs-container">
      <div class="cs-flex-group">
        <span class="cs-topper">{content.hero.subheadline}</span>
        <h1 class="cs-title">{content.hero.headline}</h1>
        <p class="cs-text">
          {content.hero.body_text}
        </p>
        <a href={content.hero.button_link} class="cs-button-solid">{content.hero.button_text}</a>
        {content.hero.button2_text && content.hero.button2_link && (
          <a href={content.hero.button2_link} class="cs-button-transparent">
            <img
              class="cs-img"
              loading="lazy"
              decoding="async"
              src="https://csimg.nyc3.digitaloceanspaces.com/Hero/play.svg"
              alt="play icon"
              width="17"
              height="17"
            />
            {content.hero.button2_text}
          </a>
        )}
      </div>
    </div>

    <!-- Background Image -->
    <!-- We can't use Astro <Picture /> as it does not support multiple sources -->
    <picture class="cs-picture">
      <source
        media="(max-width: 600px)"
        srcset="/assets/images/hero-m.webp"
      />
      <source media="(min-width: 601px)" srcset="/assets/images/hero.jpg" />
      <img
        aria-hidden="true"
        decoding="async"
        src={optimizedImage.src}
        alt="new home"
        width="2500"
        height="1667"
        loading="eager"
      />
    </picture>

  </section>

  <!-- ============================================ -->
  <!--                  Services                    -->
  <!-- ============================================ -->

  <!-- ============================================ -->
  <!--                  Services                    -->
  <!-- ============================================ -->

  <section id="services" class="services">
    <div class="cs-container">
      <!-- Services Header Content -->
      <div class="cs-content">
        <span class="cs-topper">{content.services_header.subheadline}</span>
        <h2 class="cs-title">{content.services_header.headline}</h2>
        <p class="cs-text">{content.services_header.body_text}</p>
      </div>

      <!-- Services Cards -->
      <div class="cs-card-group">
        <div class="cs-item">
          <picture class="cs-picture">
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/svgs/service1.svg"
              alt="rescue icon"
              width="48"
              height="48"
            />
          </picture>
          <h3 class="cs-h3">{content.services_header.service_1}</h3>
          <p class="cs-item-text">
            {content.services_header.service_1_description}
          </p>
        </div>

        <div class="cs-item">
          <picture class="cs-picture">
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/svgs/service2.svg"
              alt="foster icon"
              width="48"
              height="48"
            />
          </picture>
          <h3 class="cs-h3">{content.services_header.service_2}</h3>
          <p class="cs-item-text">
            {content.services_header.service_2_description}
          </p>
        </div>

        <div class="cs-item">
          <picture class="cs-picture">
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/svgs/service3.svg"
              alt="adoption icon"
              width="48"
              height="48"
            />
          </picture>
          <h3 class="cs-h3">{content.services_header.service_3}</h3>
          <p class="cs-item-text">
            {content.services_header.service_3_description}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!--                 Side By Side                 -->
  <!-- ============================================ -->

  <section id="sbs">
    <div class="cs-container">
      <!-- Left Image Section -->
      <div class="cs-left">
        <picture class="cs-picture cs-picture1">
          <source
            media="(max-width: 600px)"
            srcset={content.about_us.featured_image_url || "/assets/images/cabinets2-m.jpg"}
          />
          <source
            media="(min-width: 601px)"
            srcset={content.about_us.featured_image_url || "/assets/images/cabinets2.jpg"}
          />
          <img
            aria-hidden="true"
            decoding="async"
            src={content.about_us.featured_image_url || "/assets/images/cabinets2.jpg"}
            alt="about us"
            loading="lazy"
            width="400"
            height="563"
          />
        </picture>
        <picture class="cs-picture cs-picture2">
          <source
            media="(max-width: 600px)"
            srcset={content.about_us.secondary_image_url || "/assets/images/construction-m.jpg"}
          />
          <source
            media="(min-width: 601px)"
            srcset={content.about_us.secondary_image_url || "/assets/images/construction.jpg"}
          />
          <img
            aria-hidden="true"
            decoding="async"
            src={content.about_us.secondary_image_url || "/assets/images/construction.jpg"}
            alt="about us secondary"
            loading="lazy"
            width="400"
            height="563"
          />
        </picture>
      </div>
      <!-- Right Content Section-->
      <div class="cs-right">
        <span class="cs-topper">{content.about_us.subheadline}</span>
        <h2 class="cs-title">{content.about_us.headline}</h2>
        <p class="cs-text">
          {content.about_us.body_text}
        </p>
        <div class="cs-flex-group">
          
          
        </div>
        <a href={content.about_us.button_link} class="cs-button-solid">{content.about_us.button_text}</a>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!--            Extra Content To Rank             -->
  <!-- ============================================ -->

  <section id="sbs-r">
    <div class="cs-container">
      <!-- Left Image Section -->
      <div class="cs-left">
        <picture class="cs-picture cs-picture1">
          <source
            media="(max-width: 600px)"
            srcset={content.what_we_do.featured_image_url || "/assets/images/construction-m.jpg"}
          />
          <source
            media="(min-width: 601px)"
            srcset={content.what_we_do.featured_image_url || "/assets/images/construction.jpg"}
          />
          <img
            aria-hidden="true"
            decoding="async"
            src={content.what_we_do.featured_image_url || "/assets/images/construction.jpg"}
            alt="What we do - featured image"
            loading="lazy"
            width="400"
            height="560"
          />
        </picture>
        <picture class="cs-picture cs-picture2">
          <source
            media="(max-width: 600px)"
            srcset={content.what_we_do.secondary_image_url || "/assets/images/cabinets2-m.jpg"}
          />
          <source
            media="(min-width: 601px)"
            srcset={content.what_we_do.secondary_image_url || "/assets/images/cabinets2.jpg"}
          />
          <img
            aria-hidden="true"
            decoding="async"
            src={content.what_we_do.secondary_image_url || "/assets/images/cabinets2.jpg"}
            alt="What we do - secondary image"
            loading="lazy"
            width="400"
            height="560"
          />
        </picture>
      </div>
      <!-- Right Content Section-->
      <div class="cs-right">
        <span class="cs-topper">{content.what_we_do.subheadline}</span>
        <h2 class="cs-title">{content.what_we_do.headline}</h2>
        <p class="cs-text">
          {content.what_we_do.body_text}
        </p>
         <div class="cs-button-wrapper">
  <a href="/donate" class="cs-button-solid">How You Can Help</a>

</div>
        </div>
       

    </div>
  </section>

  <!-- ============================================ -->
  <!--                   Gallery                    -->
  <!-- ============================================ -->

  {showSuccessStories && (
    <section id="gallery">
      <div class="cs-container">
        <span class="cs-topper">{content.success_stories.subheadline}</span>
        <h2 class="cs-title">
          {content.success_stories.headline}
        </h2>
        <div class="cs-image-group">
        <!-- Row 1-->
        <div class="cs-row cs-row-1">
          <!-- To add more images, copy and paste this row's picture tags here in order from cs-picture-1 to cs-picture-3 and they will maintain the same layout-->
          <picture class="cs-picture cs-picture1">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port1-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port1.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port1.jpg"
              alt="new hallway"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
          <picture class="cs-picture cs-picture2">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port4-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port4.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port4.jpg"
              alt="new home construction"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
          <picture class="cs-picture cs-picture3">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port7-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port7.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port7.jpg"
              alt="building a new wall"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
        </div>
        <!-- Row 2 -->
        <div class="cs-row cs-row-2">
          <!-- To add more images, copy and paste this row's picture tags here in order from cs-picture-1 to cs-picture-3 and they will maintain the same layout-->
          <picture class="cs-picture cs-picture1">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port2-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port2.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port2.jpg"
              alt="new kitchen"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
          <picture class="cs-picture cs-picture2">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port5-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port5.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port5.jpg"
              alt="apartment addition"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
          <picture class="cs-picture cs-picture3">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port8-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port8.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port8.jpg"
              alt="kew kitchen cabinets"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
        </div>
        <!-- Row 3 -->
        <div class="cs-row cs-row-3">
          <!-- To add more images, copy and paste this row's picture tags here in order from cs-picture-1 to cs-picture-3 and they will maintain the same layout-->
          <picture class="cs-picture cs-picture1">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port3-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port3.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port3.jpg"
              alt="new kitchen"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
          <picture class="cs-picture cs-picture2">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port6-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port6.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port6.jpg"
              alt="apartment addition"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
          <picture class="cs-picture cs-picture3">
            <source
              media="(max-width: 600px)"
              srcset="/assets/images/portfolio/port9-m.jpg"
            />
            <source
              media="(min-width: 601px)"
              srcset="/assets/images/portfolio/port9.jpg"
            />
            <img
              aria-hidden="true"
              decoding="async"
              src="/assets/images/portfolio/port9.jpg"
              alt="kew kitchen cabinets"
              loading="lazy"
              width="400"
              height="560"
            />
          </picture>
        </div>
        </div>
        <a href={content.success_stories.button_link} class="cs-button-solid">{content.success_stories.button_text}</a>
      </div>
    </section>
  )}

    <!-- ============================================ -->
  <!--                    FAQ                       -->
  <!-- ============================================ -->

  <section id="faq-1741">
    <div class="cs-container">
      <div class="cs-content">
        <span class="cs-topper">{content.faq_section.subheadline}</span>
        <h2 class="cs-title">{content.faq_section.headline}</h2>
        <p class="cs-text">{content.faq_section.body_text}</p>
      </div>
      <div class="cs-flex-group">
        <ul class="cs-faq-group">
          {content.faq_section.faq_question_1 && (
            <li class="cs-faq-item active">
              <button class="cs-button">
                <span class="cs-button-text">{content.faq_section.faq_question_1}</span>
              </button>
              <p class="cs-item-text">{content.faq_section.faq_answer_1}</p>
            </li>
          )}
          {content.faq_section.faq_question_2 && (
            <li class="cs-faq-item">
              <button class="cs-button">
                <span class="cs-button-text">{content.faq_section.faq_question_2}</span>
              </button>
              <p class="cs-item-text">{content.faq_section.faq_answer_2}</p>
            </li>
          )}
          {content.faq_section.faq_question_3 && (
            <li class="cs-faq-item">
              <button class="cs-button">
                <span class="cs-button-text">{content.faq_section.faq_question_3}</span>
              </button>
              <p class="cs-item-text">{content.faq_section.faq_answer_3}</p>
            </li>
          )}
          {content.faq_section.faq_question_4 && (
            <li class="cs-faq-item">
              <button class="cs-button">
                <span class="cs-button-text">{content.faq_section.faq_question_4}</span>
              </button>
              <p class="cs-item-text">{content.faq_section.faq_answer_4}</p>
            </li>
          )}
          {content.faq_section.faq_question_5 && (
            <li class="cs-faq-item">
              <button class="cs-button">
                <span class="cs-button-text">{content.faq_section.faq_question_5}</span>
              </button>
              <p class="cs-item-text">{content.faq_section.faq_answer_5}</p>
            </li>
          )}
        </ul>
      </div>
    </div>
  </section>
  
  <!-- ============================================ -->
  <!--                   Reviews                    -->
  <!-- ============================================ -->

  <section id="reviews">
    <div class="cs-container">
      <span class="cs-topper">{content.reviews_header.subheadline}</span>
      <h2 class="cs-title">{content.reviews_header.headline}</h2>
      <p class="cs-text">
        {content.reviews_header.body_text}
      </p>
      <ul class="cs-card-group">
        <!-- Review 1 -->
        <li class="cs-item">
          <img
            class="cs-item-img"
            aria-hidden="true"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile5.png"
            alt="profile picture"
            width="80"
            height="80"
          />
          <p class="cs-item-p">
            Dictum dolor, nullam morbi sem in auctor proin. Consequat dolor
            habitasse nam sed tempor. Viverra magna pharetra rhoncus, nec sed
            ullamcorper lectus et. Auctor velit diam fermentum consequat.
            Feugiat viverra massa urna, volutpat orci imperdiet eget eget.
          </p>
          <span class="cs-reviewer">
            Jon Doe
            <span class="cs-desc">Homeowner</span>
          </span>
          <img
            class="cs-item-stars"
            aria-hidden="true"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/stars-yellow.svg"
            alt="stars"
            width="96"
            height="16"
          />
        </li>
        <!-- Review 2 -->
        <li class="cs-item">
          <img
            class="cs-item-img"
            aria-hidden="true"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/profile-4.png"
            alt="profile picture"
            width="80"
            height="80"
          />
          <p class="cs-item-p">
            Dictum dolor, nullam morbi sem in auctor proin. Consequat dolor
            habitasse nam sed tempor. Viverra magna pharetra rhoncus, nec sed
            ullamcorper lectus et. Auctor velit diam fermentum consequat.
            Feugiat viverra massa urna, volutpat orci imperdiet eget eget.
          </p>
          <span class="cs-reviewer">
            Jane Doe
            <span class="cs-desc">Homeowner</span>
          </span>
          <img
            class="cs-item-stars"
            aria-hidden="true"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.digitaloceanspaces.com/Reviews/stars-yellow.svg"
            alt="stars"
            width="96"
            height="16"
          />
        </li>
      </ul>
      <a aria-label="read more reviews" href={content.reviews_header.button_link} class="cs-button-solid"
        >{content.reviews_header.button_text}</a
      >
    </div>
  </section>

  <CTA
    headline={content.cta.headline}
    subheadline={content.cta.subheadline}
    body_text={content.cta.body_text}
    button_text={content.cta.button_text}
    button_link={content.cta.button_link}
  />
</BaseLayout>

<style lang="less">
  /* STYLES FOR ABOVE THE FOLD */

  /*-- -------------------------- -->
<---           Hero             -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    #hero {
      font-family: "Roboto", "Arial", sans-serif;
      /* Centers button */
      text-align: center;
      /* changes on tablet */
      padding: 0 (16/16rem);
      padding-bottom: (100/16rem);
      position: relative;
      z-index: 1;
      /* prevents overflow from the lines extending past the screen width */
      overflow: hidden;

      .cs-picture {
        /* Background Image */
        width: 100%;
        height: 100%;
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        z-index: -2;

        &:before {
          /* Black Color Overlay */
          content: "";
          width: 100%;
          height: 100%;
          background: #000;
          opacity: 0.7;
          display: block;
          position: absolute;
          top: 0;
          left: 0;
          z-index: 1;
          /* prevents the cursor from interacting with it */
          pointer-events: none;
        }

        img {
          width: 100%;
          height: 100%;
          /* Makes image act like a background-image */
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-container {
        width: 100%;
        max-width: (1280/16em);
        margin: auto;
        /* we put the padding top and bottom on the container instead of #Hero so the pseudo element lines go to the top and bottom of the section */
        /* 144px - 280px - leaving extra space for the navigation */
        /* changes on tablet */
        padding: clamp(9em, 25.95vw, 17.5em) 0;
        position: relative;

        &:before {
          /* Left Line */
          content: "";
          width: 1px;
          height: 100%;
          background: -moz-linear-gradient(
            top,
            rgba(250, 251, 252, 0.5) 0%,
            rgba(250, 251, 252, 0) 100%
          ); /* FF3.6-15 */
          background: -webkit-linear-gradient(
            top,
            rgba(250, 251, 252, 0.5) 0%,
            rgba(250, 251, 252, 0) 100%
          ); /* Chrome10-25,Safari5.1-6 */
          opacity: 1;
          display: block;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-flex-group {
        width: 80vw;
        /* 464px - 562px */
        max-width: clamp(29em, 60vw, 35.125em);
        margin: auto;
        /* 60px - 220px */
        margin-bottom: clamp(3.75em, 15.5vw, 13.75em);
        box-sizing: border-box;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        flex-wrap: wrap;
      }

      .cs-topper {
        text-align: center;
        margin-bottom: (16/16rem);
        color: var(--primary);
      }

      .cs-title {
        text-align: center;
        width: 100%;
        color: var(--bodyTextColorWhite);
      }

      .cs-text {
        text-align: center;
        /* 32px - 40px */
        margin: 0 auto clamp(2rem, 4vw, 2.5rem) 0;
        /* 40px - 48px */
        margin-bottom: clamp(2.5rem, 4vw, 3rem);
        color: var(--bodyTextColorWhite);
      }

      .cs-button-solid {
        margin-bottom: calc(16 / 16 * 1rem);
      }

      .cs-button-transparent {
        margin: 0 (8/16rem);
        color: #fff;
        border-color: var(--bodyTextColorWhite);

        &:hover {
          color: var(--primary);
          background-color: var(--bodyTextColorWhite);
          border-color: var(--bodyTextColorWhite);
        }

        .cs-img {
          margin-right: (12/16rem);
          display: block;
        }
      }
    }
  }

  /* Tablet - 768px */
  @media only screen and (min-width: 48em) {
    #hero {
      /* 32px - 40px */
      padding: 0 clamp(2em, 5vw, 2.5em);

      .cs-container {
        padding: clamp(7em, 27.95vw, 17.5em) 0 clamp(9em, 30.95vw, 23.5em) 0;
        &:after {
          /* Right Line */
          content: "";
          width: 1px;
          height: 100%;
          background: -moz-linear-gradient(
            top,
            rgba(250, 251, 252, 0) 0%,
            rgba(250, 251, 252, 0.5) 100%
          ); /* FF3.6-15 */
          background: -webkit-linear-gradient(
            top,
            rgba(250, 251, 252, 0) 0%,
            rgba(250, 251, 252, 0.5) 100%
          ); /* Chrome10-25,Safari5.1-6 */
          opacity: 1;
          display: block;
          position: absolute;
          top: 0;
          right: 0;
        }
      }

      .cs-button-solid {
        margin-right: (20/16rem);
        margin-bottom: 0;
      }
    }
  }

  /* Desktop Parallax Effect - 1300px */
  @media only screen and (min-width: 81.25em) {
    #hero {
      background: url("/assets/images/hero.jpg");
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      /* creates parallax effect on background image */
      background-attachment: fixed;
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #hero {
        .cs-background {
          &:before {
            opacity: 0.8;
          }
        }
      }
    }
  }

  /*-- -------------------------- -->
<---          Services          -->
<--- -------------------------- -*/

  /* Mobile */
  @media only screen and (min-width: 0em) {
    .services {
      width: 90%;
      max-width: (1320/16em);
      margin: auto;
      margin-top: (-167/16em);
      margin-bottom: (50/16em);
      padding: (50/16em) (20/16em);
      background: #fff;
      box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.05);
      border-top: (6/16em) solid var(--primary);
      border-radius: (5/16em);
      position: relative;
      z-index: 100;

      .cs-container {
        width: 100%;
        max-width: (1280/16em);
        margin: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .cs-content {
        width: 100%;
        text-align: center;
        margin-bottom: (48/16em);

        .cs-topper {
          font-size: (16/16em);
          line-height: 1.2em;
          text-transform: uppercase;
          text-align: center;
          letter-spacing: .1em;
          font-weight: 700;
          color: var(--primary);
          margin-bottom: (4/16em);
          display: block;
        }

        .cs-title {
          font-size: (31/16em);
          font-weight: 900;
          line-height: 1.2em;
          text-align: center;
          max-width: (700/16em);
          margin: 0 auto (16/16em);
          color: var(--headerColor);
          position: relative;
        }

        .cs-text {
          font-size: (16/16em);
          line-height: 1.5em;
          text-align: center;
          width: 100%;
          max-width: (650/16em);
          margin: 0 auto;
          color: var(--bodyTextColor);
        }
      }

      .cs-card-group {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: (50/16em);
      }

      .cs-item {
        width: 100%;
        max-width: (357/16em);
        text-align: center;
        list-style: none;

        .cs-picture {
          width: (88/16em);
          height: (88/16em);
          margin: auto;
          margin-bottom: (23/16em);
          background: var(--primary);
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;

          img {
            width: (48/16em);
            height: (48/16em);
          }
        }

        .cs-h3 {
          font-size: (32/16em);
          font-weight: 700;
          line-height: 1.25em;
          text-align: center;
          margin-bottom: (13/16em);
          color: var(--headerColor);
        }

        .cs-item-text {
          line-height: 1.5em;
          text-align: center;
          color: var(--bodyTextColor);
        }
      }
    }
  }

  /* Tablet */
  @media only screen and (min-width: 768px) {
    .services {
      font-size: ~"min(1.8vw, 1em)";
      width: 98%;

      .cs-content {
        .cs-title {
          font-size: (48/16em);
        }
      }

      .cs-card-group {
        flex-direction: row;
        justify-content: space-between;
        align-items: flex-start;
        gap: (20/16em);
      }

      .cs-item {
        max-width: (325/16em);
        margin: 0;
      }
    }
  }

  /* Large Desktop */
  @media only screen and (min-width: 1300px) {
    .services {
      padding: (50/16em) (80/16em);

      .cs-item {
        max-width: (357/16em);
      }
    }
  }

  /* Dark mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #services {
        background: var(--medium);

        picture {
          background: var(--primaryDark);
        }

        h2 {
          font-weight: bold;
          color: #fff;
        }
      }
    }
  }

  /* PAGE-SPECIFIC STYLES FOR THE HOME PAGE */

  /*-- -------------------------- -->
<---       Side By Side         -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    #sbs {
      padding: var(--sectionPadding);

      .cs-container {
        width: 100%;
        max-width: (1280/16rem);
        margin: auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        row-gap: (40/16rem);
      }

      .cs-left {
        /* scaling the font size with the view width */
        font-size: ~"min(2.31vw, .7em)";
        /* using ems so we can use font size to scale the whole section */
        width: (631/16em);
        height: (636/16em);
        position: relative;
      }

      .cs-picture {
        border-radius: (24/16em);
        display: block;
        position: absolute;
        /* clips img tag corners */
        overflow: hidden;
        img {
          width: 100%;
          height: 100%;
          /* makes image act like a background image */
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-picture1 {
        width: (522/16em);
        height: (581/16em);
        top: 0;
        left: 0;
      }

      .cs-picture2 {
        width: (414/16em);
        height: (400/16em);
        background-color: #fff;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 40px;
        /* 6px - 12px */
        border: clamp(0.375em, 1.5vw, 0.75em) solid #fff;
        right: 0;
        bottom: 0;
      }

      .cs-right {
        max-width: (542/16rem);
        margin: auto;
      }

      .cs-topper {
        text-align: left;
        margin-bottom: (4/16rem);
      }

      .cs-title {
        text-align: left;
        max-width: (800/16rem);
      }

      .cs-text {
        text-align: left;
        max-width: (750/16rem);
        margin-bottom: (16/16rem);

        &:last-of-type {
          margin-bottom: (32/16rem);
        }
      }

      .cs-flex-group {
        /* 16px - 32px */
        padding: clamp(1rem, 3vw, 2rem);
        background-color: #f7f7f7;
        border-radius: (16/16rem);
        position: relative;
      }

      .cs-flex-p {
        /* 14px - 16px */
        font-size: clamp(0.875rem, 1.5vw, 1rem);
        line-height: 1.5em;
        margin: 0 0 (16/16rem);
        color: #353535;
      }

      .cs-name {
        font-size: (16/16rem);
        font-weight: bold;
        line-height: 1.2em;
        text-transform: uppercase;
        margin: 0 0 (4/16rem);
        color: var(--headerColor);
        display: block;
      }

      .cs-job {
        font-size: (14/16rem);
        line-height: 1.5em;
        color: #353535;
        display: block;
      }

      .cs-quote-icon {
        /* 60px - 136px */
        width: clamp(3.75rem, 10vw, 8.5rem);
        height: auto;
        position: absolute;
        /* 16px - 32px */
        right: clamp(1rem, 4vw, 2rem);
        bottom: (0/16rem);
      }

      .cs-button-solid {
        margin-top: (32/16rem);
      }
    }
  }

  /* Desktop - 1024px */
  @media only screen and (min-width: 64em) {
    #sbs {
      .cs-container {
        flex-flow: row;
        justify-content: space-between;
        gap: (52/16rem);
      }

      .cs-left {
        font-size: ~"min(1.2vw, 1em)";
        flex: none;
      }

      .cs-right {
        margin: 0;
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #sbs {
        .cs-left {
          &:before,
          &:after {
            background: var(--accent);
          }
        }

        .cs-picture2 {
          background-color: var(--dark);
          /* 6px - 12px */
          border: clamp(0.375em, 1.5vw, 0.75em) solid var(--dark);
        }

        .cs-topper {
          color: var(--primaryLight);
        }

        .cs-title,
        .cs-text,
        .cs-h3,
        .cs-flex-p,
        .cs-name {
          color: var(--bodyTextColorWhite);
        }

        .cs-flex-group {
          background-color: var(--accent);
        }

        .cs-job {
          color: var(--bodyTextColorWhite);
          opacity: 0.8;
        }

        .cs-quote-icon {
          opacity: 0.2;
        }
      }
    }
  }

  /*-- -------------------------- -->
<---       Side By Side         -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    #sbs-r {
      padding: var(--sectionPadding);

      .cs-container {
        width: 100%;
        max-width: (1280/16rem);
        margin: auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        row-gap: (40/16rem);
      }

      .cs-left {
        /* scaling the font size with the view width */
        font-size: ~"min(2.31vw, .7em)";
        /* using ems so we can use font size to scale the whole section */
        width: (631/16em);
        height: (636/16em);
        position: relative;
      }

      .cs-picture {
        border-radius: (24/16em);
        display: block;
        position: absolute;
        /* clips img tag corners */
        overflow: hidden;
        img {
          width: 100%;
          height: 100%;
          /* makes image act like a background image */
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-picture1 {
        width: (522/16em);
        height: (581/16em);
        top: 0;
        right: 0;
      }

      .cs-picture2 {
        width: (414/16em);
        height: (400/16em);
        background-color: #fff;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 40px;
        /* 6px - 12px */
        border: clamp(0.375em, 1.5vw, 0.75em) solid #fff;
        bottom: 0;
        left: 0;
      }

      .cs-right {
        max-width: (542/16rem);
        margin: auto;
      }

      .cs-topper {
        text-align: left;
        margin-bottom: (4/16rem);
      }

      .cs-title {
        text-align: left;
        max-width: (800/16rem);
      }

      .cs-text {
        text-align: left;
        max-width: (750/16rem);
        margin-bottom: (16/16rem);
        &:last-of-type {
          margin-bottom: (32/16rem);
        }
      }

      .cs-flex-group {
        /* 16px - 32px */
        padding: clamp(1rem, 3vw, 2rem);
        background-color: #f7f7f7;
        border-radius: (16/16rem);
        position: relative;
      }

      .cs-flex-p {
        /* 14px - 16px */
        font-size: clamp(0.875rem, 1.5vw, 1rem);
        line-height: 1.5em;
        margin: 0 0 (16/16rem);
        color: #353535;
      }

      .cs-name {
        font-size: (16/16rem);
        font-weight: bold;
        line-height: 1.2em;
        text-transform: uppercase;
        margin: 0 0 (4/16rem);
        color: var(--headerColor);
        display: block;
      }

      .cs-job {
        font-size: (14/16rem);
        line-height: 1.5em;
        color: #353535;
        display: block;
      }

      .cs-quote-icon {
        /* 60px - 136px */
        width: clamp(3.75rem, 10vw, 8.5rem);
        height: auto;
        position: absolute;
        /* 16px - 32px */
        right: clamp(1rem, 4vw, 2rem);
        bottom: (0/16rem);
      }
    }
  }

  /* Desktop - 1024px */
  @media only screen and (min-width: 64em) {
    #sbs-r {
      .cs-container {
        flex-flow: row;
        justify-content: space-between;
        gap: (52/16rem);
      }

      .cs-left {
        font-size: ~"min(1.2vw, 1em)";
        /* sends it to the right */
        order: 2;
        flex: none;
      }

      .cs-right {
        margin: 0;
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #sbs-r {
        .cs-left {
          &:before,
          &:after {
            background: var(--accent);
          }
        }

        .cs-picture2 {
          background-color: var(--dark);
          /* 6px - 12px */
          border: clamp(0.375em, 1.5vw, 0.75em) solid var(--dark);
        }

        .cs-topper {
          color: var(--primaryLight);
        }

        .cs-title,
        .cs-text,
        .cs-h3,
        .cs-flex-p,
        .cs-name {
          color: var(--bodyTextColorWhite);
        }

        .cs-flex-group {
          background-color: var(--accent);
        }

        .cs-job {
          color: var(--bodyTextColorWhite);
          opacity: 0.8;
        }

        .cs-quote-icon {
          opacity: 0.2;
        }
      }
    }
  }

  /*-- -------------------------- -->
<---          Gallery           -->
<--- -------------------------- -*/

  /* Mobile - 360px - Contains hover animation */
  @media only screen and (min-width: 0em) {
    #gallery {
      /* Centers button */
      text-align: center;
      padding: var(--sectionPadding);
      position: relative;
      /* Prevents overflow from the image going off screen */
      overflow: hidden;
      .cs-container {
        width: 100%;
        max-width: (1322/16em);
        margin: auto;
      }

      .cs-topper {
        text-align: center;
        margin-bottom: (16/16rem);
      }

      .cs-title {
        text-align: center;
        max-width: (621/16rem);
        margin-bottom: (40/16rem);
      }

      .cs-image-group {
        /* used rem so it doesn't scale with the font size of on parent */
        font-size: ~"min(1.1vw, 1em)";
        width: 100%;
        max-width: (1322/16em);
        margin: 0 auto (60/16rem);
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: (30/16em);
      }

      .cs-row {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        gap: (30/16em);
      }

      .cs-picture {
        display: block;
        position: relative;
        img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-row-1 {
        .cs-picture1 {
          width: (420/16em);
          height: (567/16em);
        }

        .cs-picture2 {
          width: (420/16em);
          height: (629/16em);
        }

        .cs-picture3 {
          width: (420/16em);
          height: (512/16em);
        }
      }

      .cs-row-2 {
        .cs-picture1 {
          width: (420/16em);
          height: (492/16em);
        }

        .cs-picture2 {
          width: (420/16em);
          height: (517/16em);
        }

        .cs-picture3 {
          width: (420/16em);
          height: (629/16em);
        }
      }

      .cs-row-3 {
        .cs-picture1 {
          width: (420/16em);
          height: (625/16em);
        }

        .cs-picture2 {
          width: (420/16em);
          height: (452/16em);
        }

        .cs-picture3 {
          width: (420/16em);
          height: (629/16em);
        }
      }
    }
  }

  /* Dark mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #gallery {
        .cs-title {
          color: var(--bodyTextColorWhite);
        }
      }
    }
  }

  /*-- -------------------------- -->
<---          Reviews           -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    #reviews {
      /* Centers the button */
      text-align: center;
      padding: var(--sectionPadding);

      .cs-container {
        width: 100%;
        max-width: (1104/16rem);
        margin: auto;
      }

      .cs-topper {
        text-align: center;
        margin-bottom: (16/16rem);
      }

      .cs-title {
        text-align: center;
        max-width: (700/16rem);
      }

      .cs-text {
        text-align: center;
        max-width: (650/16rem);
        /* 88px - 104px */
        margin-bottom: clamp(5.5em, 10.2vw, 6.5em);
      }

      .cs-card-group {
        /* 48px - 64px */
        margin: 0 auto clamp(3rem, 5vw, 4rem);
        padding: 0;
      }

      .cs-item {
        text-align: left;
        list-style: none;
        width: 100%;
        max-width: (542/16rem);
        margin: 0 auto (64/16rem);
        /* Prevents padding from affecting height & width */
        box-sizing: border-box;
        /* Padding L & R - 16px - 32px */
        padding: (60/16rem) clamp(1rem, 3.2vw, 2rem) 0;
        /* 32px - 40px */
        padding-bottom: clamp(2rem, 5.4vw, 2.5rem);
        background: #fff;
        box-shadow: 0px 20px 39px 0px rgba(0, 0, 0, 0.05);
        border-radius: (4/16rem);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        position: relative;

        &:last-of-type {
          margin-bottom: 0;
        }
      }

      .cs-item-img {
        width: (80/16rem);
        height: (80/16rem);
        position: absolute;
        top: (-40/16rem);
      }

      .cs-item-p {
        font-size: (16/16rem);
        line-height: 1.5em;
        margin: 0 0 (20/16rem);
        padding-bottom: (20/16rem);
        color: var(--bodyTextColor);
        border-bottom: 1px solid #e8e9ec;
      }

      .cs-reviewer {
        font-size: (16/16rem);
        font-weight: 700;
        line-height: 1.5em;
        width: 40%;
        margin: 0 auto 0 0;
        color: var(--headerColor);
        display: block;
      }

      .cs-desc {
        font-size: (14/16rem);
        font-weight: 400;
        color: var(#353535);
        display: block;
      }

      .cs-item-stars {
        width: (96/16rem);
        height: (16/16rem);
      }
    }
  }

  /* Tablet - 768px */
  @media only screen and (min-width: 48em) {
    #reviews {
      .cs-card-group {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: (16/16rem);
      }

      .cs-item {
        /* reset margin so it won't interfere with flexbox */
        margin: 0;
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #reviews {
        .cs-title,
        .cs-text,
        .cs-item-p,
        .cs-reviewer {
          color: var(--bodyTextColorWhite);
        }

        .cs-item {
          background: var(--medium);
        }

        .cs-desc {
          color: var(--primaryLight);
        }
      }
    }
  }

  /*-- -------------------------- -->
  <---           FAQ              -->
  <--- -------------------------- -*/

  @media only screen and (min-width: 0em) {
    #faq-1741 {
      padding: var(--sectionPadding);

      .cs-container {
        width: 100%;
        max-width: (1280/16rem);
        margin: auto;
        display: flex;
        flex-direction: column;
        gap: clamp(2rem, 6vw, 3rem);
      }

      .cs-content {
        text-align: center;
        max-width: (674/16rem);
        margin: 0 auto;

        .cs-text {
          margin-bottom: 0;
        }
      }

      .cs-flex-group {
        display: flex;
        flex-direction: column;
        gap: clamp(1.5rem, 4vw, 2rem);
      }

      .cs-faq-group {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        gap: 1rem;
      }

      .cs-faq-item {
        border-radius: (16/16rem);
        border: 1px solid rgba(0, 0, 0, 0.08);
        background: #fff;
        transition: border 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        cursor: pointer;

        &.active {
          border-color: var(--primary);
          box-shadow: 0 20px 45px rgba(16, 24, 40, 0.12);

          .cs-item-text {
            max-height: 500px;
            padding-bottom: 1rem;
            opacity: 1;
          }
        }

        .cs-button {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
          padding: clamp(1rem, 3vw, 1.25rem);
          font-size: clamp(1rem, 2.5vw, 1.1rem);
          font-weight: 600;
          background: transparent;
          border: none;
          text-align: left;
          color: var(--headerColor);
          cursor: pointer;
        }

        .cs-item-text {
          max-height: 0;
          overflow: hidden;
          padding: 0 clamp(1rem, 3vw, 1.25rem);
          font-size: 0.95rem;
          color: var(--bodyTextColor);
          line-height: 1.6;
          transition: max-height 0.3s ease, opacity 0.3s ease, padding-bottom 0.3s ease;
          opacity: 0;
        }
      }
    }
  }

  @media only screen and (min-width: 48em) {
    #faq-1741 {
      .cs-flex-group {
        flex-direction: row;
        align-items: flex-start;
      }

      .cs-faq-group {
        width: 100%;
      }
    }
  }
</style>

<script>
const initFaq = () => {
  const faqItems = Array.from(document.querySelectorAll<HTMLElement>('#faq-1741 .cs-faq-item'));
  if (!faqItems.length) return;

  faqItems.forEach((item) => {
    if (item.dataset.bound === 'true') return;
    item.dataset.bound = 'true';
    item.addEventListener('click', () => {
      item.classList.toggle('active');
    });
  });
};

document.addEventListener('DOMContentLoaded', initFaq);
document.addEventListener('astro:page-load', initFaq);
</script>
